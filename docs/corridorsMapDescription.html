<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Corridors · Procedural layout generation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Corridors · Procedural layout generation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ondrejnepozitek.github.io//ProceduralLevelGenerator/index.html"/><meta property="og:description" content="There are currently 2 layout generators implemented. The first one generates layouts where neighbouring rooms are connected by doors. The second one, on the other hand, connects neighbouring rooms by corridors."/><link rel="shortcut icon" href="/ProceduralLevelGenerator/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/ProceduralLevelGenerator/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/ProceduralLevelGenerator/"><h2 class="headerTitle">Procedural layout generation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/ProceduralLevelGenerator/docs/introduction.html" target="_self">Docs</a></li><li><a href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator/" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/introduction.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/installation.html">Installation</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/guides.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/basicMapDescription.html">Basics</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/differentShapesMapDescription.html">Different shapes</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/differentProbabilitiesMapDescription.html">Different probabilities</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/ProceduralLevelGenerator/docs/corridorsMapDescription.html">Corridors</a></li></ul></div><div class="navGroup navGroupActive"><h3>Misc</h3><ul><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/gui.html">GUI</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/configFormat.html">Config format</a></li><li class="navListItem"><a class="navItem" href="/ProceduralLevelGenerator/docs/benchmarks.html">Benchmarks</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Corridors</h1></header><article><div><span><p>There are currently 2 layout generators implemented. The first one generates layouts where neighbouring rooms are connected by doors. The second one, on the other hand, connects neighbouring rooms by corridors.</p>
<p>In this tutorial, we will look into how to use the latter one.</p>
<h2><a class="anchor" aria-hidden="true" name="setup"></a><a href="#setup" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup</h2>
<p>In this tutorial, we will use a graph with 17 vertices codenamed <em>Example1</em>:</p>
<p><img src="/ProceduralLevelGenerator/docs/assets/graphs/example1.svg" alt="alt-text"></p>
<p>We will use basic default shapes for rooms - a square and a rectangle - as they are not important for this tutorial.</p>
<h2><a class="anchor" aria-hidden="true" name="adding-corridors"></a><a href="#adding-corridors" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding corridors</h2>
<p>Corridors could be handled as normal rooms just with specific shapes. Hovewer, this approach is very slow as the total number of nodes in the graph becomes almost twice the original count (because map description needs connected graphs).</p>
<p>Instead, a completely different approach was implemented. The algoritm ignores corridor rooms and tries to get valid layouts consisting only of the ogirinal rooms without corridors. Hovewer, the algorithms does not place neighbouring rooms directly next to each other. It places such rooms in a way that they are specified number of units away from each other (this is reffered to be the <em>offset of configuration spaces</em> througnout this documentation). When a valid layout is found, the algorithm tries to greedily add corridor rooms.</p>
<p><strong>Note:</strong> Currently, <code>MapDescription</code> class supports either not having corridors or adding a corridor between every pair of neighbouring rooms.</p>
<p>In this tutorial, we will set the offset of non corridor neighbours to be equal to 1 and then set room shapes of corridor rooms to be 1x1 squares.</p>
<p>Let's add corridors:</p>
<h3><a class="anchor" aria-hidden="true" name="using-c-api"></a><a href="#using-c-api" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using C# api</h3>
<p>First we have to obtain the right instance of <code>ChainBasedGenerator</code> class:</p>
<pre><code class="hljs css csharp"><span class="hljs-keyword">var</span> layoutGenerator = LayoutGeneratorFactory.GetChainBasedGeneratorWithCorridors&lt;<span class="hljs-keyword">int</span>&gt;(<span class="hljs-keyword">new</span> List&lt;<span class="hljs-keyword">int</span>&gt;() { <span class="hljs-number">1</span> });
</code></pre>
<p>And now we setup the map description:</p>
<pre><code class="hljs css csharp"><span class="hljs-keyword">var</span> mapDescription = <span class="hljs-keyword">new</span> MapDescription&lt;<span class="hljs-keyword">int</span>&gt;();

<span class="hljs-comment">// Graph and default shapes are set here.</span>

<span class="hljs-comment">// Setup corridor shapes</span>
<span class="hljs-keyword">var</span> corridorRoom = <span class="hljs-keyword">new</span> RoomDescription(
  GridPolygon.GetSquare(<span class="hljs-number">1</span>),
  <span class="hljs-keyword">new</span> SpecificPositionsMode(<span class="hljs-keyword">new</span> List&lt;OrthogonalLine&gt;()
  {
    <span class="hljs-keyword">new</span> OrthogonalLine(<span class="hljs-keyword">new</span> IntVector2(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-keyword">new</span> IntVector2(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)),
    <span class="hljs-keyword">new</span> OrthogonalLine(<span class="hljs-keyword">new</span> IntVector2(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), <span class="hljs-keyword">new</span> IntVector2(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
  })
);

mapDescription.AddCorridorShapes(corridorRoom);

<span class="hljs-comment">// Enable corridors</span>
mapDescription.SetWithCorridors(<span class="hljs-literal">true</span>, <span class="hljs-keyword">new</span> List&lt;<span class="hljs-keyword">int</span>&gt;() { <span class="hljs-number">1</span> });
</code></pre>
<h3><a class="anchor" aria-hidden="true" name="using-config-files"></a><a href="#using-config-files" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using config files</h3>
<p>We first create a tutorial_corridors.yml file under the Resources/Rooms folder. Here we add room shapes for our corridors. We will create one shape - 1x1 square with doors on two opposite sides.</p>
<pre><code class="hljs css yaml"><span class="hljs-comment"># Resources/Rooms/tutorial_corridors.yml</span>

<span class="hljs-attr">name:</span> <span class="hljs-string">tutorial_corridors</span>
<span class="hljs-attr">roomDescriptions:</span>
  <span class="hljs-number">1</span><span class="hljs-attr">-square:</span>
<span class="hljs-attr">    shape:</span> <span class="hljs-string">[[0,0],</span> <span class="hljs-string">[0,1],</span> <span class="hljs-string">[1,1],</span> <span class="hljs-string">[1,0]]</span>
<span class="hljs-attr">    doorMode:</span> <span class="hljs-string">!SpecificPositionsMode</span>
<span class="hljs-attr">      doorPositions:</span> 
<span class="hljs-bullet">        -</span> <span class="hljs-string">[[0,0],</span> <span class="hljs-string">[1,0]]</span>
<span class="hljs-bullet">        -</span> <span class="hljs-string">[[0,1],</span> <span class="hljs-string">[1,1]]</span>
</code></pre>
<p>Now we create the map description:</p>
<pre><code class="hljs css yaml"><span class="hljs-comment"># Resources/Maps/tutorial_basic.yml</span>

<span class="hljs-comment"># Rooms and passages are added here.</span>

<span class="hljs-comment"># Default room shapes are added here.</span>

<span class="hljs-attr">corridors:</span>
<span class="hljs-attr">  enable:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">  offsets:</span> <span class="hljs-string">[1]</span>
<span class="hljs-attr">  corridorShapes:</span>
<span class="hljs-bullet">    -</span>
<span class="hljs-attr">      setName:</span> <span class="hljs-string">tutorial_corridors</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" name="summary"></a><a href="#summary" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Summary</h2>
<p>The map description is now ready to be used in a layout generator. You can find the full C# source code <a href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator/blob/master/Sandbox/Examples/CorridorsExample.cs">here</a> and the config files <a href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator/tree/master/Resources">here</a>.</p>
<p>Don't forget to use the appropriate layout generator if using the C# api.</p>
<h2><a class="anchor" aria-hidden="true" name="results"></a><a href="#results" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Results</h2>
<div class="results">
  <a href="/ProceduralLevelGenerator/docs/assets/corridors/0.jpg" target="_blank">
    <img src="/ProceduralLevelGenerator/docs/assets/corridors/0.jpg" alt="result">
  </a>
  <a href="/ProceduralLevelGenerator/docs/assets/corridors/1.jpg" target="_blank">
    <img src="/ProceduralLevelGenerator/docs/assets/corridors/1.jpg" alt="result">
  </a>
  <a href="/ProceduralLevelGenerator/docs/assets/corridors/2.jpg" target="_blank">
    <img src="/ProceduralLevelGenerator/docs/assets/corridors/2.jpg" alt="result">
  </a>
  <a href="/ProceduralLevelGenerator/docs/assets/corridors/3.jpg" target="_blank">
    <img src="/ProceduralLevelGenerator/docs/assets/corridors/3.jpg" alt="result">
  </a>
</div>
<p><strong>Note:</strong> Click on images to see them in a full size.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="differentProbabilitiesMapDescription.html">← Different probabilities</a><a class="docs-next button" href="gui.html">GUI →</a></div></div></div></div></div></body></html>